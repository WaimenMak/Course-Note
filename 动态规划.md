# 动态规划

### 股票买卖问题（含手续费）

动态规划：动态方程组+表格记录

```C
int maxProfit(int* prices, int pricesSize, int fee){
    int n = pricesSize;
    int dp[2][n];
    dp[0][0] = 0; dp[1][0] = -prices[0];
    for(int i = 1;i<=n-1;i++)
    {
        dp[0][i] = fmax(dp[0][i-1], dp[1][i - 1] + prices[i] - fee );
        dp[1][i] = fmax(dp[0][i-1] - prices[i], dp[1][i-1]);
    }

    //return fmax(dp[1][n-1],dp[0][n-1]);
    return dp[0][n-1];
}
```

一共有4种状态，`dp[1][i - 1] + prices[i] - fee`代表前一天持有股票今天卖出得到的总收益，`dp[0][i-1] - prices[i]`代表昨天没有持有今天买入的收益，买入所以减去今天价格，其余两种情况均为维持上一天的状态，因此受益就是上一天得到的收益。注释部分：不需要取最后一日两种操作最大值，因为最后一天的操作只可能是卖或继续持有，这两个状态已经在 `dp[0][i]` 里包含了。

|      |   day1    |    day2    | day3 | day4 | day5 |
| :--: | :-------: | :--------: | :--: | :--: | :--: |
|  0   |     0     | two choice |      |      |      |
|  1   | -price[0] | two choice |      |      |      |

